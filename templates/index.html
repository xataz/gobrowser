<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>goBrowser</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	<style>
		#content {
			margin-top: 20px;
		}

		a {
                    color: #555;
                }
                a:hover {
                    color: #bbb;
                    text-decoration: none;  
                }

	</style>
  </head>
  <body>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="/">
					goBrowser
				</a>
			</div>
		</div>
	</nav>
	<div class="container" id="content">
	<div class="panel panel-primary">
		<div class="panel-heading">{{ .Name }}</div>
		<div class="panel-body">
			<table class="table table-striped table-hover">
				<thead>
					<th>#</th>
					<th>Name</th>
					<th class="hidden-xs hidden-sm">Size</th>
					<th class="hidden-xs hidden-sm">Action</th>
				</thead>
				<tbody> 
                                    {{ range $content := .FolderList }}
                                        <tr>
						<td><span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span></td>
						<td><a href={{ $content.Path }}>{{ $content.Name }}/</a></td>
						<td class="hidden-xs hidden-sm"></td>
						<td class="hidden-xs hidden-sm"></td>
					</tr>
                                    {{end}}
                                    {{ range $content := .FileList }}
					<tr>
						<td><span class="glyphicon glyphicon-file" aria-hidden="true"></span></td>
						<td><a href={{ $content.Path }}>{{ $content.Name }}</a></td>
						<td class="hidden-xs hidden-sm">{{ $content.Size }}</td>
						<td class="hidden-xs hidden-sm">
                                                    <a href={{ $content.Path }} label="download">
                                                        <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                                                    </a>   
                                                    <a href="javascript:void(0)" onclick="CreateShare('{{$content.Path}}')">
                                                        <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                                                    </a>
                                                </td>
                        		</tr>
			            {{end}}
                                </tbody>
			</table>
		</div>

		<div class="panel-footer">{{ .Name }}</div>
	</div>
	</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
        function CreateShare(file) {
            $.ajax({
                url : {{.WebRoot}}+'/createshare'+file,
                dataType : 'html',
                success : function(code_html, statut){
                    alert(code_html);
                }
            });
            
        }
    </script>
  </body>
</html>
